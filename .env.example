COMPOSE_PROJECT_NAME=scut

# ============================================================================
# MySQL Docker初始化参数（仅在容器首次启动时使用）
# ============================================================================
# MySQL root账户密码（超级管理员，用于数据库管理）
MYSQL_ROOT_PASSWORD=change_me_root_pw
# Docker初始化时创建的数据库名称
MYSQL_DATABASE=scut_shop
# Docker初始化时创建的应用数据库用户（非root，安全性更好）
MYSQL_USER=scut_user
# 该应用用户的密码
MYSQL_PASSWORD=change_me_db_pw

# ============================================================================
# 初始管理员账户配置（会在数据库初始化时自动创建）
# ============================================================================
# 管理员用户名
ADMIN_USERNAME=admin
# 管理员邮箱
ADMIN_EMAIL=admin@shop.local
# 管理员密码（生产环境务必修改为强密码！）
ADMIN_PASSWORD=change_me_admin_pw

# ============================================================================
# 后端应用连接数据库的配置（必须与上面的MySQL参数一致）
# ============================================================================
# 数据库主机地址（在Docker内部为服务名'db'，在Docker外为'127.0.0.1:3307'）
DB_HOST=db
# 数据库端口（Docker内部为3306，Docker外为3307）
DB_PORT=3306
# 应用连接的数据库名称（必须 = MYSQL_DATABASE）
DB_NAME=scut_shop
# 应用连接数据库的用户（必须 = MYSQL_USER）
DB_USER=scut_user
# 应用连接数据库的密码（必须 = MYSQL_PASSWORD）
DB_PASSWORD=change_me_db_pw

# ============================================================================
# Redis缓存配置
# ============================================================================
# Redis服务器地址
REDIS_HOST=redis
# Redis服务器端口
REDIS_PORT=6379

# ============================================================================
# JWT令牌配置
# ============================================================================
# JWT签名密钥（用于生成和验证JWT令牌，生产环境必须改为长随机密钥）
JWT_SECRET=replace_with_a_long_random_secret
# JWT访问令牌过期时间（分钟）
JWT_EXPIRES_MIN=60

# ============================================================================
# 邮件配置（用于发送激活邮件、订单确认等）
# ============================================================================
# SMTP服务器地址（如：smtp.qq.com, smtp.gmail.com, smtp.aliyun.com）
MAIL_HOST=mailhog
# SMTP端口（465=SSL加密, 587=STARTTLS加密, 1025=MailHog开发环境）
MAIL_SMTP_PORT=1025
# 邮件账户用户名
MAIL_USERNAME=
# 邮件账户密码（生产环境应使用授权码而不是真实密码）
MAIL_PASSWORD=
# 邮件发件人地址和名称
MAIL_FROM="SCUT Shop <noreply@example.com>"
# 是否使用STARTTLS加密（端口587）
MAIL_TLS=false
# 是否使用SSL加密（端口465，QQ邮箱推荐使用此配置）
MAIL_SSL=false

# ============================================================================
# 邮件激活和前端配置
# ============================================================================
# 是否启用用户邮件激活功能
EMAIL_ACTIVATION_ENABLED=false
# 前端基础URL（用于生成激活链接）
FRONTEND_BASE=http://localhost:3000

# ============================================================================
# 应用配置
# ============================================================================
# 应用监听端口
APP_PORT=8080
# 是否使用模拟支付（true=演示模式，false=调用真实支付接口）
PAYMENT_MOCK=true
# 强制支付失败（用于测试支付失败流程）
PAYMENT_FORCE_FAILURE=false

# ============================================================================
# 【重要】管理员账户说明（网站管理员，NOT MySQL root账户）
# ============================================================================
# 网站管理员是指具有 ROLE_ADMIN 角色的普通用户账户。
# 与 MySQL root 账户（MYSQL_ROOT_PASSWORD）完全不同！
#
# ⚠️ 初始化时 NO 预设管理员账户。必须手动创建！
#
# 创建管理员的步骤：
#
# 【方式一】通过前端 UI 注册 + 数据库手动分配角色（推荐）
#   1. 访问前端注册页面：http://localhost:3000/register
#   2. 注册一个账户，例如：
#      - username: admin
#      - email: admin@shop.local
#      - password: YourSecurePassword@2024 （使用强密码）
#   3. 手动分配 ROLE_ADMIN 角色：
#      
#      【选项A】使用 Adminer（Web UI）
#      - 访问 http://localhost:8080
#      - System: MySQL
#      - Server: db (Docker内) 或 127.0.0.1:3307 (Docker外)
#      - Username: root 或 scut_user
#      - Password: MYSQL_ROOT_PASSWORD 或 MYSQL_PASSWORD
#      - Database: scut_shop
#      - 执行 SQL：
#        INSERT INTO user_role (user_id, role_id) 
#        SELECT u.id, r.id FROM user u, role r 
#        WHERE u.username='admin' AND r.name='ROLE_ADMIN';
#
#      【选项B】使用 MySQL CLI
#      docker exec scut_db mysql -u root -p${MYSQL_ROOT_PASSWORD} ${MYSQL_DATABASE}
#      然后执行上面的 INSERT SQL 语句
#
# 【方式二】通过 SQL 脚本一步完成（仅用于测试环境）
#   docker exec scut_db mysql -u root -p${MYSQL_ROOT_PASSWORD} ${MYSQL_DATABASE} << 'EOF'
#   -- 如果用户不存在则创建（密码哈希需要从已加密的密码获取）
#   INSERT IGNORE INTO user (username, email, password_hash, status) 
#   VALUES ('admin', 'admin@shop.local', '<bcrypt_hash_from_app>', 1);
#   -- 分配 ROLE_ADMIN 角色
#   INSERT IGNORE INTO user_role 
#   SELECT u.id, (SELECT id FROM role WHERE name='ROLE_ADMIN') 
#   FROM user WHERE username='admin';
#   EOF
#
# 【安全提示】⚠️ 生产环境必读
# - 使用强密码：大小写 + 数字 + 特殊字符，至少 12 位
# - 不要在此文件中保存真实密码
# - 应用层自动使用 BCrypt 加密密码
# - 定期审计 user_role 表确认权限分配正确
# - 定期检查 user 表的 status 字段（0=禁用，1=启用）
# - 限制管理员数量，定期禁用不活跃的管理员账户
# - 实施强认证（如：二次验证/MFA）
#
